<?php

// Fetch pages direct from Wiki and extract references

error_reporting(E_ALL);

/*
{{Repository
| name           = Coleção de Anuros da Universidade Federal de Uberlândia
| alias          = Coleção de Anuros do Museu de Biodiversidade do Cerrado, Universidade Federal de Uberlândia
| image          = 
| image_caption  = 
| description    = 
| inception      = 
| location       = Uberlândia, Minas Gerais
| country        = Brazil
| publication    = 
| parent         = Instituto de Biologia, Universidade Federal de Uberlândia
| other          = 
| wikipedia      = 
| website        = 
}}
*/

//----------------------------------------------------------------------------------------
function get($url, $user_agent='', $content_type = '')
{	
	$data = null;

	$opts = array(
	  CURLOPT_URL =>$url,
	  CURLOPT_FOLLOWLOCATION => TRUE,
	  CURLOPT_RETURNTRANSFER => TRUE
	);

	if ($content_type != '')
	{
		$opts[CURLOPT_HTTPHEADER] = array("Accept: " . $content_type);
	}
	
	if ($user_agent != '')
	{
		$opts[CURLOPT_USERAGENT] = $user_agent;
	}		
	
	$ch = curl_init();
	curl_setopt_array($ch, $opts);
	$data = curl_exec($ch);
	$info = curl_getinfo($ch); 
	curl_close($ch);
	
	return $data;
}


$page_names = array('AAG-UFU');
$page_names = array('CM');

// need to handle redirects
$page_names = array('NHMUK');

$page_names = array('SDNHM');
//$page_names = array('CASENT');
//$page_names = array('BRI');
//$page_names = array('NHMUK');
//$page_names = array('GENT'); // x
//$page_names = array('AM');
//$page_names = array('AMES');
//$page_names = array('GH');

//$page_names = array('YU');
//$page_names = array('MZUSP'); // lots of additional fields

//$page_names = array('MONZ');

//$page_names = array('NA'); // no page
//$page_names = array('NAP');

//$page_names = array('MZUSP');

$page_names = array('OSUS');

$page_names = array(
'A',
'AAG-UFU',
'AAU',
'ABRI',
'ABSRC',
'ACC',
'ACMS',
'ACUH',
'AD',
'ADO',
'ADSH',
'AEF',
'AEI',
'AFFBB',
'Agricultural Academy of Chinghai',
'Agricultural University of Athens',
'AHU',
'AIBU',
'AIK',
'AIM',
'AIMZ',
'AJOU',
'ALEU',
'Aligarh Muslim University',
'ALNHS',
'AM',
'AMES',
'AMG',
'AMMS',
'AMNH',
'AMNZ',
'AMUP',
'ANDES',
'ANDES–IN',
'ANG',
'ANHRT',
'ANIC',
'ANK',
'ANSP',
'ANU',
'APP',
'ASEA',
'ASIZ',
'ASM-JGSU',
'ASU',
'ATH',
'ATHU',
'Auburn University',
'Auckland University of Technology',
'AUEM',
'AUMNH',
'AUZM',
'AVU',
'AZMM',
'B',
'BAA',
'BAF',
'BAK',
'BAS',
'BASBG',
'BASU',
'BAU',
'BAYLU',
'BC',
'BC CAS',
'BDSU',
'BEI',
'BELUM',
'BEO',
'BFUC',
'BFUS',
'BH',
'BHCB',
'BIN',
'BIOECO',
'BISH',
'BKF',
'BKL',
'BLKU',
'BLQ',
'BLXU',
'BMDU',
'BMHU',
'BMKB',
'BMN',
'BMNH',
'BMNY',
'BMSA',
'BMSYU',
'BNHM',
'BNHS',
'BNM',
'BNMC',
'BNU',
'BO',
'BOL',
'BONN',
'BOR/MOL',
'BORD',
'BP',
'BPBM',
'BR',
'BRH',
'BRI',
'BRIT',
'BRLSI',
'BRNM',
'BRTC',
'BSA',
'BSKU',
'BSMP',
'BSNU',
'BSPG',
'BU',
'BYU',
'BZM',
'C',
'CAG',
'CAI',
'CAL',
'CALSSNU',
'CAN',
'CANB',
'CARCIB',
'CARIE',
'CAS',
'CASS',
'CAT',
'CAU',
'CAUC',
'CBDG',
'CBEE',
'CBF',
'CBG',
'CBGP',
'CBM',
'CBNU',
'CBSE',
'CBSS',
'CBUG',
'CCB',
'CDBI',
'CDFA',
'CDM',
'CDRS',
'CEIP-UP',
'CENAK',
'CEPEC',
'CERMT',
'CET',
'CFBH',
'CFC',
'CFRB',
'CFRI',
'CGE',
'CGM',
'CGR',
'CGRB',
'CHRB',
'CHUFC',
'CHUNB',
'CIAA',
'CIB',
'CICCAA',
'CIS',
'CISUKM',
'CJ',
'CJIV',
'CJS',
'CLAM',
'CM',
'CMA',
'CMNC',
'CMNFI',
'CMNHB',
'CMNO',
'CMNZ',
'CNAN',
'CNC',
'CNIN',
'CNMP-UPAZ',
'CNMS',
'CNP',
'CNU',
'CNUIC',
'COGM',
'COI',
'COL',
'CONC',
'CORBIDI',
'CORD',
'CPAC',
'CPDHU',
'CPPSAU',
'CPUN',
'CQNU',
'CR',
'CRBA',
'Crea-Sam',
'CSBD',
'CSCA',
'CSCS',
'CSIRO',
'CSMB',
'CSMU',
'CTES',
'CTU',
'CUFH',
'CUI',
'CUIZM',
'CUMNH',
'CUMZ',
'CVULA',
'CVUSB',
'CWNU',
'CYP',
'CZ-FaCEN',
'CZACC',
'Czech Academy of Sciences',
'CZNC',
'CZUG',
'CZUT',
'DAC',
'DAFNE',
'DAO',
'DBAU',
'DBET',
'DBHTC',
'DBHU',
'DBKHU',
'DBSNU',
'DBSTU',
'DBTU',
'DBUA',
'DBULPGC',
'DCBBU',
'DD',
'DEFACU',
'DEI',
'DIBEC',
'DMA',
'DMBPKNU',
'DMNH',
'DMNS',
'DNA',
'DNMNH',
'DNSM',
'DOAT',
'DPP',
'DPPSU',
'DS',
'DU',
'DUBC',
'DUF',
'DUH',
'DUKE',
'DUOF',
'DZ',
'DZBHU',
'DZPU',
'DZSJRP',
'DZUFMG',
'DZUP',
'E',
'EA',
'EBCC',
'EBD',
'EBH',
'EBRG',
'ECON',
'ECOTAAR',
'EFMEA',
'EGE',
'EI',
'ELFAU',
'ELKU',
'EMEM',
'EML',
'EMNAU',
'EMNH',
'EMNSTU',
'EMU',
'ENCB',
'EPN',
'ESALQ',
'ESFM',
'ESSE',
'ESUW',
'ETHZ',
'EUM',
'EUMJ',
'EXEMS',
'EZC',
'F',
'FAFU',
'FAR',
'FAUCV',
'FBHC',
'FCE',
'FCNyM – UNLP',
'FEB RAS',
'FFR',
'FH',
'FHGO',
'FHS',
'FI',
'FIOCRUZ',
'FLMNH',
'FML',
'FMNH',
'FMNHH',
'FRCS',
'FRIM',
'FRU',
'FSCA',
'FSL',
'FSU',
'FT',
'FU',
'FUMH',
'FUNED',
'FURB',
'FURG',
'G',
'GA',
'GABAS',
'GAC',
'GANMNH',
'GAS',
'GAT',
'GAUNZM',
'GAZI',
'GB',
'GC',
'GDA',
'GDAC',
'GEA',
'GH',
'GIE',
'GJO',
'GL',
'GMUG',
'GNM',
'GNS',
'GOET',
'GPMM',
'GSE',
'GSFPM',
'GUGC',
'GUMF',
'GXNU',
'GXU',
'GZU',
'H',
'HAASM',
'HAL',
'HASBC',
'HBG',
'HBI',
'HBR',
'HBRI',
'HECRI',
'HEID',
'HES',
'HKES',
'HKS',
'HLMD',
'HMG',
'HMIM',
'HNHA',
'HNHM',
'HNU',
'HOH',
'HPM',
'HSHU',
'HTC',
'HU (Museum)',
'HUB',
'HUJ',
'HUM',
'HUNAU',
'HUSCAP',
'HUT',
'IABHU',
'IADIZA',
'IAET',
'IAH',
'IAN',
'IASST',
'IAUM',
'IAV',
'IAVH',
'IBAUNC',
'IBER',
'IBGE',
'IBIW',
'IBS',
'IBSJ',
'IBSP',
'IBSS',
'IBUG',
'IBUNAM',
'ICCC',
'ICDBB',
'ICM',
'ICMR',
'ICNMHN',
'ICNMHN-L',
'ICSU',
'ICYU',
'IEB',
'IEBR',
'IEE',
'IEGU',
'IEPA',
'IES',
'IESNU',
'IESYU',
'IEUP',
'IEVU',
'IEXA',
'IFAN',
'IFENM',
'IFML',
'IFZB',
'IGM',
'IGUS',
'IHB',
'IHN',
'IICT',
'IJ',
'IKG',
'IM',
'IMBC',
'IMC',
'IMEAMMS',
'IMM',
'IMNRF-UT',
'IMNU',
'IMPPS',
'INABIO',
'INAT',
'INBAC',
'INBC',
'INBio',
'INBUNAM',
'INCN',
'INHMT',
'INHS',
'INIRENA',
'INPA',
'INU',
'INV CRU',
'INVEMAR',
'IOC',
'IOCAS',
'IORAS',
'IPUM',
'IRIPP',
'IRMC',
'IRRI',
'IRSM',
'IRSN',
'ISEA',
'ISEAN',
'ISEZ',
'ISTE',
'ISTF',
'ISTTU',
'ISU',
'ISZAF',
'ISZB',
'ITBC',
'ITBCZ',
'ITZ',
'IUSHM',
'IVPP',
'IZA',
'IZAM',
'IZAS',
'IZBAS',
'IZBE',
'IZNAS',
'IZSNU',
'IZUA',
'IZUK',
'JACA',
'JE',
'JEPS',
'JIA',
'JJ',
'JLU',
'JUK',
'JVC',
'JXAUM',
'K',
'KAS',
'KASH',
'KATO',
'KAUM',
'KBIN',
'KFBG',
'KFM',
'KIZ',
'KKIC',
'KKSIC',
'KMNH',
'KMU',
'KNA',
'KNU',
'KNUH',
'KNUT',
'KNYA',
'KON',
'KOR',
'KPM',
'KPSP',
'KR',
'KSEM',
'KSMA',
'KSP',
'KSS',
'KSUH',
'KTUB',
'KU',
'KUAM',
'KUHE',
'KUM',
'KUMA',
'KUN',
'KUNHM',
'KUZ',
'KW',
'KYO',
'L',
'LAAH',
'LACM',
'LAE',
'LANUFSC',
'LAR',
'LBM',
'LBRC',
'LCDCP',
'LD',
'LE',
'LEB',
'LEC',
'LEIT',
'LEMQ',
'LEU',
'LEUBIPRO',
'Lev Medvedev collection',
'LFC',
'LIL',
'LINN',
'LIPI',
'LIRP',
'LISU',
'LIV',
'LKCNHM',
'LMK',
'LMNH',
'LNK',
'LOJA',
'LP',
'LPA',
'LPB',
'LPM',
'LS',
'LSAM',
'LSL',
'LSNK',
'LSSU',
'LSU Museum of Natural History',
'LSUHC',
'LUES',
'LUNZ',
'LY',
'LZATM',
'M',
'MA',
'MACB',
'MACN',
'MAE',
'MAGNT',
'MAK',
'MAKB',
'MALUZ',
'MARSSJ',
'MASP',
'MASS',
'MAWR',
'MB',
'MBLUZ',
'MBML',
'MBNH',
'MBUCV',
'MCCI',
'MCG',
'MCL',
'MCN',
'MCNA',
'MCNG',
'MCNIP',
'MCNU',
'MCP',
'MCSM',
'MCSMNH',
'MCSNB',
'MCSNG',
'MCSNL',
'MCSNM',
'MCUF',
'MCWNU',
'MCZ',
'MCZR',
'MD',
'MDUG',
'MDZF',
'MECN',
'MEFLG',
'MEFLG–UN',
'MEL',
'MELM',
'MEM',
'MEPN',
'MEUC',
'MEUV',
'MEXU',
'MFCH',
'MFSN',
'MGAB',
'MGCL',
'MGHNL',
'MGM',
'MGU',
'MHBU',
'MHGC',
'MHN-UC',
'MHN-UN',
'MHN-UPN',
'MHNA',
'MHNC',
'MHNCI',
'MHNCM',
'MHNCSJ',
'MHNG',
'MHNGL',
'MHNK',
'MHNLCDF',
'MHNLS',
'MHNM',
'MHNN',
'MHNNKM',
'MHNSR',
'MHNT',
'MHNUC',
'MHUA',
'MICH',
'MICP',
'MIIZ',
'MIL',
'MILZ',
'MIMB',
'MIN',
'MINGA',
'MIUC',
'MIUP',
'MIZA',
'MIZP',
'MJG',
'MJML',
'MLP',
'MLPA',
'MLS',
'MLU',
'MLUH',
'MMB',
'MMK',
'MMNH',
'MMUE',
'MMUS',
'MNA',
'MNC',
'MNCN',
'MNCNM',
'MNCR',
'MNEG',
'MNHA',
'MNHAH',
'MNHB',
'MNHL',
'MNHM',
'MNHN',
'MNHNC',
'MNHNCU',
'MNHNL (Lima)',
'MNHNL (Luxembourg)',
'MNHNSD',
'MNHS',
'MNHUP',
'MNHWU',
'MNM',
'MNMSM',
'MNNC',
'MNRJ',
'MNSD',
'MNST',
'MNU',
'MNVD',
'MNVHB',
'MO',
'MONZ',
'MORG',
'MOUFPE',
'MPEG',
'MPM',
'MPNU',
'MPPM',
'MPU',
'MRAC',
'MRSN',
'MRSNT',
'MSB',
'MSNB',
'MSNF',
'MSNG',
'MSNM',
'MSNP',
'MSNS',
'MSNUP',
'MSNVE',
'MSPU',
'MSU',
'MTAS',
'MTD',
'MTQ',
'MTU',
'MU',
'MUBI',
'MUC',
'MUCI',
'MUD',
'MUFAL',
'MUFE',
'MUHNAC',
'MUMF',
'MUN',
'MUSA',
'MUSE',
'MUSENUV',
'MUSM',
'MVUP',
'MWFB',
'MWM',
'MWNH',
'MZ',
'MZCFS',
'MZFC',
'MZH',
'MZL',
'MZLS',
'MZLU',
'MZMU',
'MZPW',
'MZS',
'MZSF',
'MZT',
'MZTU',
'MZUA',
'MZUB',
'MZUC',
'MZUC-UCCC',
'MZUCR',
'MZUEFS',
'MZUEL',
'MZUESC',
'MZUF',
'MZUFBA',
'MZUFV',
'MZUJ',
'MZULP',
'MZUNAP',
'MZUR',
'MZUS',
'MZUSP',
'MZUTI',
'NAFU',
'NAP',
'NBC',
'NBCN',
'NBG',
'NBRC',
'NCA',
'NCAP',
'NCB',
'NCBN',
'NCBS',
'NCBSB',
'NCF',
'NCHU',
'NCSM',
'NCSU',
'NCU',
'NDG',
'NEBC',
'NEFU',
'NEIGAE',
'NFCSO',
'NGBB',
'NH',
'NHM-TU',
'NHMB',
'NHMBZ',
'NHMC',
'NHMD',
'NHMK',
'NHMLA',
'NHMLG',
'NHMM',
'NHMMI',
'NHMO',
'NHMOU',
'NHMP',
'NHMSU',
'NHMT',
'NHMW',
'NHNM',
'NIAES',
'NIBR',
'NIFI',
'NIFS',
'NIGP',
'NINA',
'NIOJ',
'NIWA',
'NJAU',
'NKUM',
'NMB',
'NMBE',
'NMBZ',
'NMC',
'NMCR',
'NME',
'NMEG',
'NMHM',
'NMI',
'NMK',
'NML',
'NMM',
'NMMB',
'NMNHI',
'NMNHM',
'NMNHS',
'NMNS',
'NMNST',
'NMNU',
'NMNW',
'NMPC',
'NMPN',
'NMS',
'NMSA',
'NMSE',
'NMSU',
'NMU',
'NMV',
'NMWC',
'NMZB',
'NNIC',
'NPC',
'NRM',
'NSM',
'NSMT',
'NSMT-P',
'NSMW',
'NSW',
'NSYSU',
'NSYSUB',
'NT',
'NTM',
'NTNU-VM',
'NTNUB',
'NTNUL',
'NTOU',
'NTUF',
'NTUIM',
'NTUM',
'NU',
'NUAM',
'NUOL',
'NUPELIA',
'NWAFU',
'NWAU',
'NWMB',
'NWMS',
'NWUX',
'NY',
'NYSM',
'NZAC',
'NZCS',
'NZNAC',
'NZOI',
'OAC',
'OCP',
'ODU',
'OKL',
'OLML',
'OMNH',
'OMNZ',
'OPU',
'ORT',
'OSAC',
'OSC',
'OSH',
'OSU',
'OSUS',
'OTT',
'OU',
'OUFE',
'OUMNH',
'OXF',
'PAC',
'PACA',
'PAL',
'PAMUH',
'PCYU',
'PDA',
'PE',
'PEM',
'PERTH',
'PFT',
'PH',
'PMA',
'PMJ',
'PMNH',
'PMO',
'PMR',
'PMSL',
'PNGMAG',
'PNM',
'PPI',
'PPRI',
'PPSG',
'PR',
'PRA',
'PRB',
'PRC',
'PRE',
'PRU',
'PSH',
'PSO-CZ',
'PSU',
'PSUZC',
'PUAC',
'PUCE',
'PUJ',
'PUP',
'PVSJ',
'QAAF',
'QCA',
'QCAZ',
'QCNE',
'QECB',
'QM',
'QSBG',
'QSMI',
'QVM',
'QVTC',
'RAB',
'RAWRC',
'RB',
'REG',
'RGUMF',
'RIEB',
'RIEZU',
'RITFCAF',
'RMBH',
'RMCA',
'RMS',
'RMSE',
'RNG',
'RO',
'ROM',
'ROV',
'RPM',
'RSA',
'RUMF',
'RUNB',
'RUZM',
'RZMB',
'S',
'SAIAB',
'SALA',
'SAM',
'SAMA',
'SANC',
'SANT',
'SAP',
'SARAM',
'SAU',
'SBMNH',
'SCAU',
'SCBHU',
'SCUM',
'SDEI',
'SDMM',
'SDNHM',
'SDNU',
'SEL',
'SEL/HNU',
'SELHNU',
'SEMC',
'SEMK',
'SEMS',
'SEV',
'SFCMC',
'SFRI',
'SGO',
'SI',
'SIE',
'SING',
'SIO',
'SIZ',
'SIZK',
'SJTU',
'SLSHNU',
'SLSNU',
'SM',
'SMBL',
'SMCR',
'SMF',
'SMFL',
'SMGT',
'SMNH',
'SMNHTA',
'SMNK',
'SMNS',
'SMS',
'SMTD',
'SMWN',
'SNHMC',
'SNM',
'SNMB',
'SNMC',
'SNMG',
'SNSD',
'SNU',
'SNUC',
'SOA',
'SOM',
'SP',
'SPPU',
'SRC',
'SRGH',
'SRSIO',
'SSBG',
'SSTU',
'STE',
'STM',
'STRI',
'STUM',
'SUT',
'SUVA',
'SWFU',
'SWIMS',
'SWNU',
'SWU',
'SWUC',
'SWUST',
'SYNU',
'SYS',
'SYSBM',
'SYSU',
'SZMK',
'SZMN',
'TAI',
'TAMU',
'TAMUIC',
'TARI',
'TARI (IH)',
'TAU',
'TBEG',
'TBI',
'TCD',
'TEX',
'TEX (herbarium)',
'TFC',
'TFRI',
'TGEM',
'THNHM',
'THU',
'THUMB',
'TI',
'TILS',
'TLMF',
'TMAG',
'TMCD',
'TMM',
'TMU',
'TNHM',
'TNS',
'TO',
'TOEF',
'TOU-AE',
'TPM',
'TTU',
'TU',
'TUA',
'TUAJ',
'TUB',
'TUM',
'U',
'UABB',
'UADBA',
'UAG',
'UAMIZ',
'UANL',
'UASB',
'UASM',
'UAT',
'UAZ',
'UB',
'UBC-SEM',
'UBDC',
'UC',
'UCB',
'UCBME',
'UCCC',
'UCCIPR',
'UCME',
'UCR',
'UF',
'UFAC',
'UFES',
'UFLA',
'UFMT',
'UFP',
'UFPB',
'UFPE',
'UFPR',
'UFRGS',
'UFRJ',
'UGIC',
'UHF',
'UHIM',
'UIB',
'UIS',
'UKM',
'ULABG',
'ULL',
'UMB',
'UMC',
'UMCE',
'UMIZ',
'UMJG&P',
'UMMZ',
'UMSI',
'UMSP',
'UMSS',
'UMUT',
'UMZC',
'UNAB',
'UNALM',
'UNAM',
'UNAM-LT',
'UNCC',
'UNIMAS',
'UNIRIO',
'UNLP',
'UNNEC',
'UNS',
'UNSAAC',
'UOH',
'UOP',
'UPA',
'UPCB',
'UPIBM',
'UPLB',
'UPNG',
'UPRM',
'UPS',
'URCA',
'URM',
'URM-P',
'URP',
'US',
'USC',
'USCO',
'USFQ',
'USJ',
'USMB',
'USMHC',
'USMS',
'USNM',
'USTC',
'USZ',
'UT',
'UTA',
'UTEP',
'UU',
'UUZM',
'UVC',
'UVG',
'UWBM',
'UWIM',
'UWZM',
'UZIL',
'UZIU',
'UZM',
'UZMC',
'V',
'VAL',
'VANF',
'VDB',
'VEN',
'VFM',
'VGRC',
'VLCA',
'VMFC',
'VNMN',
'VNUF',
'VPI',
'VRTC',
'VT',
'W',
'WAG',
'WAM',
'WAS',
'WH',
'WHT',
'WIGJ',
'WILD',
'WIS',
'WRM',
'WRSL',
'WU',
'WUR',
'XNC',
'YBU',
'YIED',
'YNU',
'YPM',
'YU',
'YUZM',
'YZU',
'Z',
'ZA',
'ZAFU',
'ZAU',
'ZDAMU',
'ZDEU',
'ZEA',
'Zfc',
'ZFMK',
'ZII',
'ZIK',
'ZIL',
'ZIMG',
'ZIN',
'ZINAS',
'ZISP',
'ZIUS',
'ZIUU',
'ZIUZ',
'ZJUH',
'ZKVV',
'ZLKU',
'ZM-CBSU',
'ZMAS',
'ZMB',
'ZMBN',
'ZMGU',
'ZMKU',
'ZMLU',
'ZMNH',
'ZMO',
'ZMPU',
'ZMSBUK',
'ZMUA',
'ZMUC',
'ZMUH',
'ZMUK',
'ZMUM',
'ZMUN',
'ZMUO',
'ZMUT',
'ZMUU',
'ZMUZ',
'ZRC',
'ZSBS',
'ZSI',
'ZSI-ERC',
'ZSI-NRC',
'ZSI-SRC',
'ZSI-WRC',
'ZSIC',
'ZSM',
'ZT',
'ZUEC',
'ZUFMS',
'ZUFRJ',
'ZUH',
'ZULI',
'ZUPV',
'ZUTC',
'ZVC',
'ZZSS',
'ÄM',
'A',
'AAC',
'AAG-UFU',
'AAU',
'ABRI',
'ABSRC',
'ACC',
'ACMS',
'ACUH',
'AD',
'ADO',
'ADSH',
'AEF',
'AEIC',
'AFFBB',
'AHU',
'AIBU',
'AIK',
'AIM',
'AIMZ',
'AJOU',
'ALNHS',
'AM',
'AME',
'AMES',
'AMG',
'AMMS',
'AMNH',
'AMNZ',
'AMU',
'AMUP',
'ANDES',
'ANDES–IN',
'ANG',
'ANHRT',
'ANIC',
'ANK',
'ANSP',
'ANU',
'APP',
'AQ',
'AR',
'ASEA',
'ASIZ',
'ASJ',
'ASM-JGSU',
'ASU',
'ATH',
'ATHU',
'AUA',
'AUEM',
'AUM',
'AUMNH',
'AUT',
'AUZM',
'AVU',
'AZMM',
'B',
'BAA',
'BAF',
'BAK',
'BAS',
'BASBG',
'BASU',
'BAU',
'BAUC',
'BAYLU',
'BBMH',
'BC',
'BC CAS',
'BCL',
'BDSU',
'BEI',
'BELUM',
'BEO',
'BFUC',
'BFUS',
'BH',
'BHCB',
'BIN',
'BIOECO',
'BISH',
'BKF',
'BKL',
'BLKU',
'BLQ',
'BLXU',
'BM',
'BMDU',
'BMH',
'BMHU',
'BMKB',
'BMN',
'BMNH',
'BMNY',
'BMSA',
'BMSYU',
'BNHM',
'BNHS',
'BNM',
'BNMC',
'BNU',
'BO',
'BOL',
'BONN',
'BOR/MOL',
'BORD',
'BP',
'BPBM',
'BR',
'BRI',
'BRIT',
'BRLSI',
'BRNM',
'BRTC',
'BSA',
'BSIS',
'BSKU',
'BSMP',
'BSNU',
'BSPG',
'BU',
'BYU',
'BZM',
'BZN',
'C',
'CAG',
'CAI',
'CAL',
'CALSSNU',
'CAN',
'CANB',
'CARCIB',
'CARIE',
'CAS',
'CAS-SU',
'CASS',
'CAT',
'CAU',
'CAUC',
'CBEE',
'CBF',
'CBG',
'CBGP',
'CBM',
'CBNU',
'CBSE',
'CBUG',
'CCB',
'CDBI',
'CDFA',
'CDM',
'CDRS',
'CEIP-UP',
'CENAK',
'CEPEC',
'CERMT',
'CET',
'CFBH',
'CFC',
'CFRB',
'CFRI',
'CG',
'CGE',
'CGM',
'CGR',
'CGRB',
'CHINM',
'CHRB',
'CHUFC',
'CHUNB',
'CIAA',
'CIB',
'CICCAA',
'CIS',
'CISUKM',
'CIT',
'CJ',
'CJIV',
'CJS',
'CLAM',
'CLIOC',
'CLSHU',
'CM',
'CMA',
'CMK',
'CMNC',
'CMNFI',
'CMNHB',
'CMNO',
'CMNZ',
'CMWM',
'CNAN',
'CNC',
'CNCI',
'CNHM',
'CNIN',
'CNMP-UPAZ',
'CNMS',
'CNP',
'CNU',
'CNUIC',
'COGM',
'COI',
'COL',
'CONC',
'CORBIDI',
'CORD',
'CPAC',
'CPC',
'CPDHU',
'CPPSAU',
'CPUN',
'CQNU',
'CR',
'CRBA',
'CRE',
'Crea-Sam',
'CSBD',
'CSCA',
'CSCS',
'CSIRO',
'CSMB',
'CSMU',
'CTES',
'CTU',
'CU',
'CUFH',
'CUI',
'CUIZM',
'Cuming Museum',
'CUMNH',
'CUMZ',
'CVPR',
'CVULA',
'CVUSB',
'CWNU',
'CYP',
'CZ-FaCEN',
'CZACC',
'CZMA',
'CZNC',
'CZUG',
'CZUT',
'DAFNE',
'DAO',
'DBAU',
'DBCUCH',
'DBET',
'DBHTC',
'DBHU',
'DBKHU',
'DBSNU',
'DBSTU',
'DBTU',
'DBUA',
'DBULPGC',
'DCBBU',
'DD',
'DEFACU',
'DEI',
'DEL',
'DHMECN',
'DIBEC',
'DMA',
'DMBPKNU',
'DMNH',
'DMNS',
'DNA',
'DNMNH',
'DNSM',
'DOAT',
'DPPSU',
'DSM',
'DU',
'DUBC',
'DUF',
'DUH',
'DUKE',
'DUOF',
'DVDB',
'DZ',
'DZBHU',
'DZPU',
'DZSJRP',
'DZUFMG',
'DZUFP',
'DZUP',
'E',
'EA',
'EBCC',
'EBD',
'EBH',
'EBRG',
'EBUAP',
'ECON',
'ECOTAAR',
'EFMEA',
'EGE',
'EHT',
'EHT-HMS',
'EHU',
'EI',
'ELFAU',
'ELKU',
'ELUO',
'EMEM',
'EML',
'EMNH',
'EMNSTU',
'EMU',
'ENCB',
'EPN',
'ERA',
'ESALQ',
'ESFM',
'ESSE',
'ESUW',
'ETHZ',
'EUM',
'EUMJ',
'EXEMS',
'EZC',
'F',
'FAFU',
'FAR',
'FAUCV',
'FBHC',
'FCE',
'FCHC',
'FCNyM – UNLP',
'FCNyM-UNLP',
'FEB RAS',
'FFR',
'FH',
'FHGO',
'FHS',
'FI',
'FIOCRUZ',
'FLAS',
'FLMNH',
'FML',
'FMNH',
'FMNHH',
'FNS',
'FR',
'FRCS',
'FRIM',
'FRU',
'FSCA',
'FSF',
'FSL',
'FSU',
'FT',
'FU',
'FUMH',
'FUNED',
'FURB',
'FURG',
'G',
'G-BOIS',
'G-DC',
'GA',
'GABAS',
'GAC',
'GANMNH',
'GAS',
'GAT',
'GAUNZM',
'GAZI',
'GB',
'GC',
'GDA',
'GDAC',
'GEA',
'GH',
'GIE',
'GJO',
'GL',
'GLM',
'GMNH',
'GMUG',
'GNM',
'GNS',
'GNU',
'GOET',
'GPMM',
'GSE',
'GSFPM',
'GUGC',
'GUMF',
'GXNU',
'GXU',
'GZU',
'H',
'HAASM',
'HAHC',
'HAL',
'HASBC',
'HBG',
'HBI',
'HBR',
'HBRI',
'HECRI',
'HEID',
'HES',
'HKES',
'HKS',
'HLMD',
'HMG',
'HMHN',
'HMIM',
'HMW',
'HNHA',
'HNHM',
'HNU',
'HPM',
'HSHU',
'HTC',
'HU',
'HUB',
'HUJ',
'HUM',
'HUMG',
'HUNAU',
'HUS',
'HUSCAP',
'HUT',
'HVH',
'IABHU',
'IADIZA',
'IAET',
'IAH',
'IAN',
'IASST',
'IAUM',
'IAV',
'IAVH',
'IBAUNC',
'IBER',
'IBGE',
'IBIW',
'IBS',
'IBSJ',
'IBSP',
'IBSS',
'IBUNAM',
'ICCC',
'ICDBB',
'ICM',
'ICMR',
'ICNMHN',
'ICSU',
'ICYU',
'IEB',
'IEBR',
'IEGU',
'IEPA',
'IES',
'IESNU',
'IESYU',
'IEUP',
'IEVU',
'IEXA',
'IFAN',
'IFENM',
'IFML',
'IFZB',
'IGM',
'IGUS',
'IHB',
'IHN',
'IICT',
'IJ',
'IKG',
'IM',
'IMBC',
'IMC',
'IMEAMMS',
'IMM',
'IMNRF-UT',
'IMNU',
'IMPPS',
'INABIO',
'INAH',
'INAT',
'INBAC',
'INBC',
'INBio',
'INBUNAM',
'INCN',
'IND-AN',
'INHMT',
'INHS',
'INIRENA',
'INPA',
'INU',
'INV CRU',
'INVEMAR',
'IOC',
'IOCAS',
'IORAS',
'IPUM',
'IRIPP',
'IRMC',
'IRRI',
'IRScNB',
'IRSM',
'IRSN',
'IRSNB',
'ISEA',
'ISEAN',
'ISEZ',
'ISTE',
'ISTF',
'ISTTU',
'ISU',
'ISZAF',
'ISZB',
'ITBC',
'ITBCZ',
'ITZ',
'ITZA',
'IU',
'IUSHM',
'IVPP',
'IZA',
'IZAM',
'IZAS',
'IZBAS',
'IZBE',
'IZNAS',
'IZSNU',
'IZUA',
'IZUC',
'IZUG',
'IZUK',
'JACA',
'JE',
'JIA',
'JJ',
'JLU',
'JUK',
'JVC',
'JXAUM',
'K',
'KAS',
'KASH',
'KATO',
'KAUM',
'KBIN',
'KFBG',
'KFM',
'KIZ',
'KKIC',
'KKSIC',
'KM',
'KMNH',
'KMU',
'KNA',
'KNU',
'KNUH',
'KNUT',
'KNYA',
'KON',
'KOR',
'KPM',
'KPSP',
'KR',
'KSEM',
'KSMA',
'KSP',
'KSS',
'KSUH',
'KTUB',
'KU',
'KUAM',
'KUHE',
'KUM',
'KUMA',
'KUN',
'KUNHM',
'KUZ',
'KW',
'KYO',
'L',
'LAAH',
'LACM',
'LAE',
'LANUFSC',
'LAR',
'LBM',
'LBP',
'LBRC',
'LCDCP',
'LD',
'LE',
'LEB',
'LEC',
'LEIT',
'LEMQ',
'LEU',
'LEUBIPRO',
'LFC',
'LIL',
'LINN',
'LIPI',
'LIRP',
'LISU',
'LIV',
'LKCNHM',
'LL',
'LMHG',
'LMK',
'LMNH',
'LNK',
'LOJA',
'LP',
'LPA',
'LPB',
'LPM',
'LS',
'LSAM',
'LSL',
'LSNK',
'LSSU',
'LSUGDM',
'LSUHC',
'LSUK',
'LSUMG',
'LSUMZ',
'LTHC',
'LUES',
'LUNZ',
'LY',
'LZATM',
'M',
'MA',
'MABA',
'MACB',
'MACH',
'MACN',
'MAE',
'MAGNT',
'MAK',
'MAKB',
'MALUZ',
'MARSSJ',
'MASP',
'MASS',
'MAWR',
'MB',
'MBL',
'MBLUZ',
'MBML',
'MBNH',
'MBUCV',
'MCCI',
'MCG',
'MCL',
'MCN',
'MCNA',
'MCNG',
'MCNIP',
'MCNU',
'MCNZ',
'MCP',
'MCSMNH',
'MCSN',
'MCSNB',
'MCSNG',
'MCSNL',
'MCSNM',
'MCUF',
'MCV',
'MCWNU',
'MCZ',
'MCZC',
'MCZR',
'MD',
'MDUG',
'MDZF',
'MECN',
'MEFLG',
'MEFLG-UN',
'MEL',
'MELM',
'MEM',
'MEPN',
'MEUC',
'MEUV',
'MEXU',
'MFCH',
'MFSN',
'Mg',
'MGAB',
'MGCL',
'MGHNL',
'MGM',
'MGU',
'MGUH',
'MHBU',
'MHGC',
'MHN-SM',
'MHN-UC',
'MHN-UN',
'MHN-UPN',
'MHNA',
'MHNB',
'MHNC',
'MHNCI',
'MHNCM',
'MHNCSJ',
'MHNG',
'MHNGL',
'MHNK',
'MHNL',
'MHNLCDF',
'MHNLS',
'MHNM',
'MHNN',
'MHNNKM',
'MHNP',
'MHNSR',
'MHNT',
'MHNUC',
'MHUA',
'MICH',
'MICP',
'MIIZ',
'MIL',
'MILZ',
'MIMB',
'MIN',
'MINGA',
'MIUC',
'MIUP',
'MIZA',
'MIZP',
'MJG',
'MJML',
'MLP',
'MLPA',
'MLS',
'MLU',
'MLUH',
'MM',
'MMB',
'MMK',
'MMUE',
'MMUS',
'MNA',
'MNB',
'MNC',
'MNCN',
'MNCNM',
'MNCR',
'MNEG',
'MNHA',
'MNHAH',
'MNHB',
'MNHL',
'MNHM',
'MNHN',
'MNHN-MO',
'MNHN-MY',
'MNHNC',
'MNHNCU',
'MNHNL (Lima)',
'MNHNL (Luxembourg)',
'MNHNP',
'MNHNSD',
'MNHP',
'MNHS',
'MNHUB',
'MNHUP',
'MNHWU',
'MNKB',
'MNKM',
'MNM',
'MNMSM',
'MNNC',
'MNRJ',
'MNSD',
'MNST',
'MNU',
'MNVD',
'MNVHB',
'MO',
'MONZ',
'MONZ-P',
'MORG',
'MOUFPE',
'MPEG',
'MPM',
'MPNU',
'MPPM',
'MPU',
'MRAC',
'MRSN',
'MRSNT',
'MSB',
'MSNB',
'MSNF',
'MSNG',
'MSNM',
'MSNP',
'MSNS',
'MSNUP',
'MSNVE',
'MSU',
'MSUMNH',
'MTAS',
'MTD',
'MTKD',
'MTQ',
'MTSN',
'MTU',
'MU',
'MUBI',
'MUC',
'MUCI',
'MUD',
'MUFAL',
'MUFE',
'MUHNAC',
'MUMF',
'MUN',
'MUSA',
'MUSE',
'MUSENUV',
'MUSM',
'MV',
'MVHN',
'MVMA',
'MVUP',
'MWFB',
'MWM',
'MWNH',
'MZ',
'MZCFS',
'MZFC',
'MZH',
'MZL',
'MZLS',
'MZLU',
'MZMU',
'MZPW',
'MZS',
'MZSF',
'MZSP',
'MZT',
'MZTU',
'MZUA',
'MZUB',
'MZUC',
'MZUC-UCCC',
'MZUCR',
'MZUEFS',
'MZUEL',
'MZUESC',
'MZUF',
'MZUFBA',
'MZUFV',
'MZUJ',
'MZULP',
'MZUNAP',
'MZUR',
'MZUS',
'MZUSP',
'NAFU',
'NAP',
'NBC',
'NBCN',
'NBG',
'NBMU',
'NBRC',
'NBUMS',
'NCA',
'NCAP',
'NCBN',
'NCBS',
'NCBSB',
'NCF',
'NCHU',
'NCIP',
'NCSM',
'NCSU',
'NCU',
'NEBC',
'NEFU',
'NEIGAE',
'NFCSO',
'NGBB',
'NH',
'NHCY',
'NHM',
'NHM-TU',
'NHMB',
'NHMBZ',
'NHMC',
'NHMD',
'NHME',
'NHMG',
'NHMK',
'NHML',
'NHMLA',
'NHMLG',
'NHMM',
'NHMMI',
'NHMO',
'NHMOU',
'NHMP',
'NHMSU',
'NHMT',
'NHMUK',
'NHMW',
'NHMZ',
'NHN',
'NHNM',
'NHRM',
'NHRS',
'NIAES',
'NIBR',
'NIFI',
'NIFS',
'NIGP',
'NINA',
'NIOJ',
'NIWA',
'NJAU',
'NKUM',
'NM',
'NMB',
'NMBE',
'NMBZ',
'NMC',
'NMCR',
'NME',
'NMEG',
'NMHM',
'NMHW',
'NMI',
'NMK',
'NML',
'NMM',
'NMMB',
'NMNH',
'NMNHI',
'NMNHL',
'NMNHM',
'NMNHS',
'NMNS',
'NMNST',
'NMNU',
'NMNW',
'NMNZ',
'NMP',
'NMPC',
'NMPN',
'NMS',
'NMSA',
'NMSE',
'NMSU',
'NMTUN',
'NMU',
'NMV',
'NMWC',
'NMZB',
'NNIC',
'NNM',
'NNML',
'NPC',
'NRM',
'NRS',
'NSM',
'NSMT',
'NSMW',
'NSW',
'NSYSU',
'NSYSUB',
'NT',
'NTM',
'NTNU-VM',
'NTNUB',
'NTNUL',
'NTOU',
'NTUF',
'NTUIM',
'NTUM',
'NU',
'NUAM',
'NUOL',
'NUPELIA',
'NUTC',
'NWAFU',
'NWAU',
'NWMB',
'NWMS',
'NWUX',
'NY',
'NYSM',
'NZAC',
'NZCS',
'NZNAC',
'NZOI',
'OAC',
'OCP',
'ODU',
'OLML',
'OMNH',
'OMNZ',
'OPU',
'OR',
'ORT',
'OSAC',
'OSC',
'OSH',
'OSU',
'OSUS',
'OTT',
'OU',
'OUFE',
'OUM',
'OUMNH',
'OXF',
'OXUM',
'P',
'P-LA',
'PAC',
'PACA',
'PAL',
'PAL-Gr',
'PAMUH',
'PAN',
'PCYU',
'PDA',
'PE',
'PEM',
'PERTH',
'PFT',
'PH',
'PIC',
'PIP',
'PIZAS',
'PKS',
'PMA',
'PMJ',
'PMNH',
'PMO',
'PMR',
'PMSL',
'PNGMAG',
'PNM',
'PPI',
'PPRI',
'PPSG',
'PR',
'PRA',
'PRB',
'PRC',
'PRE',
'PRU',
'PSH',
'PSO-CZ',
'PSU',
'PSUZC',
'PUAC',
'PUCE',
'PUJ',
'PUP',
'PVSJ',
'QAAF',
'QCA',
'QCAZ',
'QCNE',
'QEC',
'QECB',
'QM',
'QPLS',
'QSBG',
'QSMI',
'QVM',
'QVTC',
'R',
'RAB',
'RAS',
'RAWRC',
'RB',
'RBINS',
'REG',
'RGM',
'RGUMF',
'RIEB',
'RIEZU',
'RITFCAF',
'RMBH',
'RMCA',
'RMNB',
'RMNH',
'RMS',
'RMSE',
'RNG',
'RO',
'ROM',
'ROV',
'RPM',
'RTMP',
'RUMF',
'RUNB',
'RUZM',
'RZMB',
'S',
'SAIAB',
'SALA',
'SAM',
'SAMA',
'SAMC',
'SANC',
'SANT',
'SAP',
'SARAM',
'SAU',
'SBMNH',
'SCAU',
'SCBHU',
'SCUM',
'SDEI',
'SDMM',
'SDNH',
'SDNHM',
'SDNU',
'SEL/HNU',
'SELHNU',
'SEMC',
'SEMK',
'SEMS',
'SEV',
'SFCMC',
'SFRI',
'SGO',
'SI',
'SIE',
'SING',
'SINU',
'SIO',
'SIZ',
'SIZK',
'SJTU',
'SLSHNU',
'SLSNU',
'SM',
'SMBL',
'SMC',
'SMCR',
'SME',
'SMF',
'SMFL',
'SMGT',
'SMK',
'SMN',
'SMNG',
'SMNH',
'SMNHTA',
'SMNK',
'SMNS',
'SMS',
'SMTD',
'SMWN',
'SNHM',
'SNM',
'SNMB',
'SNMC',
'SNMG',
'SNMNH',
'SNSD',
'SNU',
'SNUC',
'SOA',
'SOM',
'SP',
'SPPU',
'SR',
'SRC',
'SRGH',
'SRNP',
'SRSIO',
'SSBG',
'SSTU',
'STE',
'STM',
'STRI',
'STUM',
'SU',
'SUT',
'SUVA',
'SWFU',
'SWIMS',
'SWNU',
'SWU',
'SWUC',
'SWUST',
'SYNU',
'SYS',
'SYSBM',
'SYSU',
'SZE',
'SZM',
'SZMK',
'SZMN',
'TAI',
'TAMU',
'TAMUIC',
'TARI',
'TARI (IH)',
'TAU',
'TBEG',
'TBI',
'TCD',
'TELA',
'TEPE',
'TESRI',
'TEX',
'TEX (herbarium)',
'TFC',
'TFRI',
'TGEM',
'THNHM',
'THU',
'THUMB',
'TI',
'TILS',
'TIU',
'TLMF',
'TMB',
'TMCD',
'TMM',
'TMU',
'TNHC',
'TNHM',
'TNS',
'TO',
'TOU-AE',
'TPM',
'TTU',
'TU',
'TUA',
'TUAJ',
'TUM',
'U',
'UABB',
'UADBA',
'UAG',
'UAMIZ',
'UANL',
'UASB',
'UASM',
'UAT',
'UAZ',
'UB',
'UBC-SEM',
'UC',
'UCB',
'UCBME',
'UCCC',
'UCCIPR',
'UCME',
'UCR',
'UCRC',
'UF',
'UFAC',
'UFES',
'UFLA',
'UFMT',
'UFP',
'UFPB',
'UFPC',
'UFPE',
'UFPR',
'UFRGS',
'UFRJ',
'UGCSBD',
'UHF',
'UHIM',
'UIB',
'UIS',
'UJA',
'UKM',
'ULABG',
'ULL',
'UMB',
'UMC',
'UMCE',
'UMIZ',
'UMJG&P',
'UMMZ',
'UMO',
'UMSI',
'UMSP',
'UMSS',
'UMUT',
'UMZC',
'UNAB',
'UNALM',
'UNAM',
'UNAM-LT',
'UNBC',
'UNCC',
'UNIMAS',
'UNIRIO',
'UNLP',
'UNNEC',
'UNS',
'UNSAAC',
'UOH',
'UOO',
'UOP',
'UP',
'UPA',
'UPCB',
'UPIBM',
'UPLB',
'UPNG',
'UPRM',
'UPS',
'URCA',
'URM',
'URP',
'US',
'USC',
'USDEP',
'USFQ',
'USJ',
'USM',
'USMB',
'USMHC',
'USMS',
'USNM',
'USTC',
'USU',
'USZ',
'UTA',
'UTEP',
'UU',
'UUZM',
'UVC',
'UVG',
'UWBM',
'UWIM',
'UWZM',
'UZIL',
'UZIU',
'UZM',
'UZMC',
'V',
'VAL',
'VANF',
'VBC',
'VDB',
'VEN',
'VFM',
'VGRC',
'VLCA',
'VMFC',
'VNMN',
'VNUF',
'VPC',
'VPI',
'VPU',
'VRTC',
'VT',
'W',
'W-Hal',
'WAG',
'WAM',
'WAS',
'WELT',
'WH',
'WHT',
'WIGJ',
'WILD',
'WIS',
'WRM',
'WRSL',
'WU',
'WU-Hal',
'WUR',
'XAM',
'XNC',
'YBU',
'YIED',
'YNU',
'YPM',
'YU',
'YUZM',
'YZU',
'Z',
'ZA',
'ZAFU',
'ZAU',
'ZDAMU',
'ZDEU',
'ZEA',
'Zfc',
'ZFMK',
'ZHMB',
'ZIAS',
'ZIHU',
'ZII',
'ZIK',
'ZIL',
'ZIMG',
'ZIN',
'ZINAS',
'ZIS',
'ZISP',
'ZIUS',
'ZIUU',
'ZIUZ',
'ZJUH',
'ZKVV',
'ZLKU',
'ZM-CBSU',
'ZMA',
'ZMAS',
'ZMB',
'ZMBJ',
'ZMBN',
'ZMG',
'ZMGU',
'ZMKU',
'ZML',
'ZMLU',
'ZMM',
'ZMMU',
'ZMNH',
'ZMO',
'ZMPU',
'ZMS',
'ZMSBUK',
'ZMUA',
'ZMUB',
'ZMUC',
'ZMUH',
'ZMUK',
'ZMUM',
'ZMUN',
'ZMUO',
'ZMUT',
'ZMUU',
'ZMUZ',
'ZRC',
'ZSBS',
'ZSI',
'ZSI-ERC',
'ZSI-NRC',
'ZSI-SRC',
'ZSI-WRC',
'ZSIC',
'ZSM',
'ZSZMH',
'ZUEC',
'ZUFMS',
'ZUFRJ',
'ZUH',
'ZULI',
'ZUPV',
'ZUTC',
'ZVC',
'ZZSS',
'ÄM',
);

/*
$page_names = array(
'ZUH'
);
*/

// errors
/*
$page_names = array(
'TARI (IH)'
);
*/

$page_names = array(
//'MHNN',
'UCR'
);

$page_names = array(
//'MZL'
'IEGU'
);

$force = true;


while (count($page_names) > 0)
{
	$is_redirect = false;

	$page_name = array_pop($page_names);
	
	echo "-- $page_name\n";
	
	$url = 'https://species.wikimedia.org/w/index.php?title=Special:Export&pages=' . str_replace(' ', '_', $page_name);

	$xml = get($url);
	
	if ($xml != '')
	{
	
		//echo $xml;

		$dom= new DOMDocument;
		$dom->loadXML($xml);
		$xpath = new DOMXPath($dom);

		$xpath->registerNamespace("wiki", "http://www.mediawiki.org/xml/export-0.10/");
	
	
		$obj = new stdclass;
	
		$nodeCollection = $xpath->query ("//wiki:title");
		foreach($nodeCollection as $node)
		{
			$obj->title = $node->firstChild->nodeValue;
		}	
			
		$nodeCollection = $xpath->query ("//wiki:text");
		foreach($nodeCollection as $node)
		{
			$obj->text = $node->firstChild->nodeValue;		
	
			// {{Ti|CM}} '''Carnegie Museum of Natural History''' 
		
			$pattern = "/^\s*\{\{Ti\|[^\}]+\}\}\s*(?<name>.*)/u";
		
			if (preg_match($pattern, $obj->text, $m))
			{
				$obj->name = $m['name'];			
				$obj->name = str_replace("'''", "", $obj->name);
			}
			
			// to do
			// '''IEGU''': Institute of Entomology, Guizhou University, Guiyang, Guizhou Province, China. 
		
			// Handle templates
			// 		
			$pattern = "/\{\{Repository(?<template>[^\}]+)\}\}/u";
			if (preg_match($pattern, $obj->text, $m))
			{
				$obj->template = $m['template'];
			
				$parts = preg_split("/\n\|/", $obj->template);
			
				//print_r($parts);
						
				foreach ($parts as $part)
				{
					if (preg_match('/(?<key>\w+(_\w+)?)\s*=\s*(?<value>.*)/u', trim($part), $mm))
					{
						if ($mm['value'] != '')
						{
							$obj->{$mm['key']} = $mm['value'];
						}
				
					}
			
				}
			}

		
			// Handle redirects
			// #REDIRECT [[CAS]]
			if (preg_match('/#REDIRECT\s+\[\[(?<title>.*)\]\]/', $obj->text, $m))
			{
				$page_names[] = $m['title'];
				$is_redirect = true;
			}

		
		}
	
	
		// clean
		if (isset($obj->text))
		{
			unset($obj->text);
		}
	
		if (isset($obj->template))
		{
			unset($obj->template);
		}
	
		//print_r($obj);
	
		if (!$is_redirect)
		{
			// to SQL
			$keys = array();
			$values = array();

			$keys[] = 'id';
			$values[] = '"wikispecies' . $page_name . '"';

			$keys[] = 'code';
			$values[] = '"' . $page_name . '"';

			$keys[] = 'wikispecies';
			$values[] = '"https://species.wikimedia.org/wiki/' . $page_name . '"';

			if (isset($obj->name))
			{
				$keys[] = 'name';
				$values[] = '"' . addcslashes($obj->name, '"') . '"';
			}

			if (isset($obj->alias))
			{
				$keys[] = 'alias';
				$values[] = '"' . addcslashes($obj->alias, '"') . '"';
			}

			if (isset($obj->country))
			{
				$keys[] = 'country';
				$values[] = '"' . addcslashes($obj->country, '"') . '"';
			}

			if (isset($obj->locality))
			{
				$keys[] = 'locality';
				$values[] = '"' . addcslashes($obj->locality, '"') . '"';
			}

			if (isset($obj->website))
			{
				// sanity check :(
			
				if (!preg_match('/^https?:\/\//', $obj->website))
				{
					$obj->website = 'http://' . $obj->website;
				}
		
		
				$keys[] = 'url';
				$values[] = '"' . addcslashes($obj->website, '"') . '"';
			
				$parts = parse_url($obj->website);
				$host = $parts['host'];
				$host = preg_replace('/^www\d?\./', '', $host);					
		
				$keys[] = 'host';
				$values[] = '"' . $host . '"';
			
			}
		
			if (isset($obj->other))
			{
				$keys[] = 'comments';
				$values[] = '"' . addcslashes($obj->other, '"') . '"';
			}
	
			echo 'REPLACE INTO nodes(' . join(',', $keys) . ') VALUES (' . join(',', $values) . ');' . "\n";			
		}	
	}	

}

?>
